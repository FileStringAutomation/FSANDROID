*** Settings ***
Resource          BusinessKeywordsForAndroid.txt
Library           DatabaseLibrary

*** Keywords ***
fsand_Input Email Address_Sign Up
    [Arguments]    ${v_EmailAdress}
    Input Text    ${SignUp_EmailAddress}    ${v_EmailAdress}

fsand_Input Password_Sign Up
    [Arguments]    ${v_Password}
    Input Password    ${SignUp_CreatePassword}    ${v_Password}

fsand_Input First Name
    [Arguments]    ${v_FirstName}
    Input Text    ${SignUp_Fistname}    ${v_FirstName}

fsand_Input Last Name
    [Arguments]    ${v_LastName}
    Input Text    ${SignUp_Lastname}    ${v_LastName}

fsand_Delete User Information In Database
    [Arguments]    ${v_emailAddress}
    #    Connect to database
    ${v_isConnectedToDatabase}=    Run Keyword And Ignore Error    DatabaseLibrary.Connect To Database Using Custom Params    adodbapi    'Provider=SQLOLEDB.1;Data Source=${v_databaseSource};Initial Catalog=${v_databaseName};User Id=${v_databaseUsername};Password=${v_databaseUserPassword};'
    Run Keyword If    '${v_isConnectedToDatabase[0]}'=='FAIL'    Fail    Could not connect to database, the error was: "${v_isConnectedToDatabase[1]}"
    #    Get current account ID based on its email address
    ${v_queryResult}=    DatabaseLibrary.Query    select * from UserEmailAddress where EmailAddress='${v_emailAddress}'
    ${v_userID}=    Set Variable    ${v_queryResult[0][1]}
    #    Delete 1: from RegisteredDevice table
    Run Keyword And Ignore Error    DatabaseLibrary.Execute Sql String    DELETE FROM WizardUser WHERE UserID='${v_userID}' ; DELETE FROM [User] WHERE UserID='${v_userID}' ;
    #    Delete 2: from ServicePreference table
    Comment    Run Keyword And Ignore Error    DatabaseLibrary.Execute Sql String    DELETE FROM ServicePreference WHERE UserID='${v_userID}'
    Comment    #    Delete 3: from UserEmailAddress table
    Comment    Run Keyword And Ignore Error    DatabaseLibrary.Execute Sql String    DELETE FROM UserEmailAddress WHERE EmailAddress='${v_emailAddress}'
    Comment    #    Delete 4: from [User] table
    Comment    Run Keyword And Ignore Error    DatabaseLibrary.Execute Sql String    DELETE FROM [User] WHERE Username='${v_emailAddress}'
    Comment    DatabaseLibrary.Disconnect From Database

fsand_váº»ifySignUpSuccessful
    [Arguments]    ${v_bigLabel}    ${v_message}
    Comment    Verify in current page
    fswin_elementTextShouldBe    ${gmwin_verificationPage[0]}    ${v_bigLabel}
    ${v_text}=    fswin_getText    ${gmwin_verificationPage[1]}
    ${v_text}=    Replace String    ${v_text}    \n    ${SPACE}
    Should Be Equal    ${v_text.strip()}    ${v_message}
    Rn Wait For Element    ${gmwin_verificationPage[2]}    ${v_timeOutInWindows}
    Rn Wait For Element    ${gmwin_verificationPage[3]}    ${v_timeOutInWindows}
